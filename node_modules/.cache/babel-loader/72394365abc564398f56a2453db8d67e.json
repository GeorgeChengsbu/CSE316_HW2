{"ast":null,"code":"var _jsxFileName = \"/Users/george/Downloads/top5-lister-hw2/src/App.js\";\nimport React from 'react';\nimport './App.css'; // IMPORT DATA MANAGEMENT AND TRANSACTION STUFF\n\nimport DBManager from './db/DBManager'; // THESE ARE OUR REACT COMPONENTS\n\nimport DeleteModal from './components/DeleteModal';\nimport Banner from './components/Banner.js';\nimport Sidebar from './components/Sidebar.js';\nimport Workspace from './components/Workspace.js';\nimport Statusbar from './components/Statusbar.js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props); // THIS WILL TALK TO LOCAL STORAGE\n\n    this.sortKeyNamePairsByName = keyNamePairs => {\n      keyNamePairs.sort((keyPair1, keyPair2) => {\n        // GET THE LISTS\n        return keyPair1.name.localeCompare(keyPair2.name);\n      });\n    };\n\n    this.createNewList = () => {\n      // FIRST FIGURE OUT WHAT THE NEW LIST'S KEY AND NAME WILL BE\n      let newKey = this.state.sessionData.nextKey;\n      let newName = \"Untitled\" + newKey; // MAKE THE NEW LIST\n\n      let newList = {\n        key: newKey,\n        name: newName,\n        items: [\"?\", \"?\", \"?\", \"?\", \"?\"]\n      }; // MAKE THE KEY,NAME OBJECT SO WE CAN KEEP IT IN OUR\n      // SESSION DATA SO IT WILL BE IN OUR LIST OF LISTS\n\n      let newKeyNamePair = {\n        \"key\": newKey,\n        \"name\": newName\n      };\n      let updatedPairs = [...this.state.sessionData.keyNamePairs, newKeyNamePair];\n      this.sortKeyNamePairsByName(updatedPairs); // CHANGE THE APP STATE SO THAT IT THE CURRENT LIST IS\n      // THIS NEW LIST AND UPDATE THE SESSION DATA SO THAT THE\n      // NEXT LIST CAN BE MADE AS WELL. NOTE, THIS setState WILL\n      // FORCE A CALL TO render, BUT THIS UPDATE IS ASYNCHRONOUS,\n      // SO ANY AFTER EFFECTS THAT NEED TO USE THIS UPDATED STATE\n      // SHOULD BE DONE VIA ITS CALLBACK\n\n      this.setState(prevState => ({\n        currentList: newList,\n        sessionData: {\n          nextKey: prevState.sessionData.nextKey + 1,\n          counter: prevState.sessionData.counter + 1,\n          keyNamePairs: updatedPairs\n        }\n      }), () => {\n        // PUTTING THIS NEW LIST IN PERMANENT STORAGE\n        // IS AN AFTER EFFECT\n        this.db.mutationCreateList(newList);\n      });\n    };\n\n    this.renameList = (key, newName) => {\n      let newKeyNamePairs = [...this.state.sessionData.keyNamePairs]; // NOW GO THROUGH THE ARRAY AND FIND THE ONE TO RENAME\n\n      for (let i = 0; i < newKeyNamePairs.length; i++) {\n        let pair = newKeyNamePairs[i];\n\n        if (pair.key === key) {\n          pair.name = newName;\n        }\n      }\n\n      this.sortKeyNamePairsByName(newKeyNamePairs); // WE MAY HAVE TO RENAME THE currentList\n\n      let currentList = this.state.currentList;\n\n      if (currentList.key === key) {\n        currentList.name = newName;\n      }\n\n      this.setState(prevState => ({\n        currentList: prevState.currentList,\n        sessionData: {\n          nextKey: prevState.sessionData.nextKey,\n          counter: prevState.sessionData.counter,\n          keyNamePairs: newKeyNamePairs\n        }\n      }), () => {\n        // AN AFTER EFFECT IS THAT WE NEED TO MAKE SURE\n        // THE TRANSACTION STACK IS CLEARED\n        let list = this.db.queryGetList(key);\n        list.name = newName;\n        this.db.mutationUpdateList(list);\n        this.db.mutationUpdateSessionData(this.state.sessionData);\n      });\n    };\n\n    this.loadList = key => {\n      let newCurrentList = this.db.queryGetList(key);\n      this.setState(prevState => ({\n        currentList: newCurrentList,\n        sessionData: prevState.sessionData\n      }), () => {// ANY AFTER EFFECTS?\n      });\n    };\n\n    this.closeCurrentList = () => {\n      this.setState(prevState => ({\n        currentList: null,\n        listKeyPairMarkedForDeletion: prevState.listKeyPairMarkedForDeletion,\n        sessionData: this.state.sessionData\n      }), () => {// ANY AFTER EFFECTS?\n      });\n    };\n\n    this.deleteList = keyNamePair => {\n      // SOMEHOW YOU ARE GOING TO HAVE TO FIGURE OUT\n      // WHICH LIST IT IS THAT THE USER WANTS TO\n      // DELETE AND MAKE THAT CONNECTION SO THAT THE\n      // NAME PROPERLY DISPLAYS INSIDE THE MODAL\n      this.setState(prevState => ({\n        keyNamePairMarkedForDeletion: keyNamePair\n      }), () => {\n        this.showDeleteListModal();\n      });\n    };\n\n    this.db = new DBManager(); // GET THE SESSION DATA FROM OUR DATA MANAGER\n\n    let loadedSessionData = this.db.queryGetSessionData(); // SETUP THE INITIAL STATE\n\n    this.state = {\n      currentList: null,\n      sessionData: loadedSessionData,\n      keyNamePairMarkedForDeletion: null\n    };\n  }\n\n  renameItem(id, textValue) {\n    this.currentList.items[id] = textValue;\n  }\n\n  deletionStart() {\n    let key = this.state.keyNamePairMarkedForDeletion.key;\n    this.db.mutationDeleteItem(key);\n    let deletedKeyNamePairs = this.state.sessionData.keyNamePairs;\n\n    for (let i = 0; i < deletedKeyNamePairs.length; i++) {\n      let deletedKeyNamePairsKey = deletedKeyNamePairs[i].key;\n      console.log(deletedKeyNamePairsKey);\n\n      if (deletedKeyNamePairsKey === key) {\n        deletedKeyNamePairs.splice(i, 1);\n        console.log(deletedKeyNamePairs);\n      }\n    }\n\n    this.setState(prevState => ({\n      keyNamePairMarkedForDeletion: null,\n      sessionData: {\n        nextKey: prevState.sessionData.nextKey,\n        counter: prevState.sessionData.counter,\n        keyNamePairs: deletedKeyNamePairs\n      }\n    }), () => {\n      this.db.mutationUpdateSessionData(this.state.sessionData);\n      this.hideDeleteListModal();\n    });\n  } // THIS FUNCTION SHOWS THE MODAL FOR PROMPTING THE USER\n  // TO SEE IF THEY REALLY WANT TO DELETE THE LIST\n\n\n  showDeleteListModal() {\n    let modal = document.getElementById(\"delete-modal\");\n    modal.classList.add(\"is-visible\");\n  } // THIS FUNCTION IS FOR HIDING THE MODAL\n\n\n  hideDeleteListModal() {\n    let modal = document.getElementById(\"delete-modal\");\n    modal.classList.remove(\"is-visible\");\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"app-root\",\n      children: [/*#__PURE__*/_jsxDEV(Banner, {\n        title: \"Top 5 Lister\",\n        closeCurrentListCall: this.closeCurrentList,\n        currentList: this.state.currentList\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Sidebar, {\n        heading: \"Your Lists\",\n        currentList: this.state.currentList,\n        keyNamePairs: this.state.sessionData.keyNamePairs,\n        createNewListCallback: this.createNewList,\n        deleteListCallback: this.deleteList,\n        loadListCallback: this.loadList,\n        renameListCallback: this.renameList\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Workspace, {\n        currentList: this.state.currentList,\n        renameItemCallback: this.renameItem\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Statusbar, {\n        currentList: this.state.currentList\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(DeleteModal, {\n        deletionStartCallback: this.deletionStart.bind(this),\n        hideDeleteListModalCallback: this.hideDeleteListModal,\n        keyNamePairMarkedForDeletion: this.state.keyNamePairMarkedForDeletion\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/george/Downloads/top5-lister-hw2/src/App.js"],"names":["React","DBManager","DeleteModal","Banner","Sidebar","Workspace","Statusbar","App","Component","constructor","props","sortKeyNamePairsByName","keyNamePairs","sort","keyPair1","keyPair2","name","localeCompare","createNewList","newKey","state","sessionData","nextKey","newName","newList","key","items","newKeyNamePair","updatedPairs","setState","prevState","currentList","counter","db","mutationCreateList","renameList","newKeyNamePairs","i","length","pair","list","queryGetList","mutationUpdateList","mutationUpdateSessionData","loadList","newCurrentList","closeCurrentList","listKeyPairMarkedForDeletion","deleteList","keyNamePair","keyNamePairMarkedForDeletion","showDeleteListModal","loadedSessionData","queryGetSessionData","renameItem","id","textValue","deletionStart","mutationDeleteItem","deletedKeyNamePairs","deletedKeyNamePairsKey","console","log","splice","hideDeleteListModal","modal","document","getElementById","classList","add","remove","render","bind"],"mappings":"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","sourcesContent":["import React from 'react';\nimport './App.css';\n\n// IMPORT DATA MANAGEMENT AND TRANSACTION STUFF\nimport DBManager from './db/DBManager';\n\n// THESE ARE OUR REACT COMPONENTS\nimport DeleteModal from './components/DeleteModal';\nimport Banner from './components/Banner.js'\nimport Sidebar from './components/Sidebar.js'\nimport Workspace from './components/Workspace.js';\nimport Statusbar from './components/Statusbar.js'\n\nclass App extends React.Component {\n    constructor(props) {\n        super(props);\n\n        // THIS WILL TALK TO LOCAL STORAGE\n        this.db = new DBManager();\n\n        // GET THE SESSION DATA FROM OUR DATA MANAGER\n        let loadedSessionData = this.db.queryGetSessionData();\n\n        // SETUP THE INITIAL STATE\n        this.state = {\n            currentList : null,\n            sessionData : loadedSessionData,\n            keyNamePairMarkedForDeletion: null\n        }\n    }\n    sortKeyNamePairsByName = (keyNamePairs) => {\n        keyNamePairs.sort((keyPair1, keyPair2) => {\n            // GET THE LISTS\n            return keyPair1.name.localeCompare(keyPair2.name);\n        });\n    }\n    // THIS FUNCTION BEGINS THE PROCESS OF CREATING A NEW LIST\n    createNewList = () => {\n        // FIRST FIGURE OUT WHAT THE NEW LIST'S KEY AND NAME WILL BE\n        let newKey = this.state.sessionData.nextKey;\n        let newName = \"Untitled\" + newKey;\n\n        // MAKE THE NEW LIST\n        let newList = {\n            key: newKey,\n            name: newName,\n            items: [\"?\", \"?\", \"?\", \"?\", \"?\"]\n        };\n\n        // MAKE THE KEY,NAME OBJECT SO WE CAN KEEP IT IN OUR\n        // SESSION DATA SO IT WILL BE IN OUR LIST OF LISTS\n        let newKeyNamePair = { \"key\": newKey, \"name\": newName };\n        let updatedPairs = [...this.state.sessionData.keyNamePairs, newKeyNamePair];\n        this.sortKeyNamePairsByName(updatedPairs);\n\n        // CHANGE THE APP STATE SO THAT IT THE CURRENT LIST IS\n        // THIS NEW LIST AND UPDATE THE SESSION DATA SO THAT THE\n        // NEXT LIST CAN BE MADE AS WELL. NOTE, THIS setState WILL\n        // FORCE A CALL TO render, BUT THIS UPDATE IS ASYNCHRONOUS,\n        // SO ANY AFTER EFFECTS THAT NEED TO USE THIS UPDATED STATE\n        // SHOULD BE DONE VIA ITS CALLBACK\n        this.setState(prevState => ({\n            currentList: newList,\n            sessionData: {\n                nextKey: prevState.sessionData.nextKey + 1,\n                counter: prevState.sessionData.counter + 1,\n                keyNamePairs: updatedPairs\n            }\n        }), () => {\n            // PUTTING THIS NEW LIST IN PERMANENT STORAGE\n            // IS AN AFTER EFFECT\n            this.db.mutationCreateList(newList);\n        });\n    }\n    renameList = (key, newName) => {\n        let newKeyNamePairs = [...this.state.sessionData.keyNamePairs];\n        // NOW GO THROUGH THE ARRAY AND FIND THE ONE TO RENAME\n        for (let i = 0; i < newKeyNamePairs.length; i++) {\n            let pair = newKeyNamePairs[i];\n            if (pair.key === key) {\n                pair.name = newName;\n            }\n        }\n        this.sortKeyNamePairsByName(newKeyNamePairs);\n\n        // WE MAY HAVE TO RENAME THE currentList\n        let currentList = this.state.currentList;\n        if (currentList.key === key) {\n            currentList.name = newName;\n        }\n\n        this.setState(prevState => ({\n            currentList: prevState.currentList,\n            sessionData: {\n                nextKey: prevState.sessionData.nextKey,\n                counter: prevState.sessionData.counter,\n                keyNamePairs: newKeyNamePairs\n            }\n        }), () => {\n            // AN AFTER EFFECT IS THAT WE NEED TO MAKE SURE\n            // THE TRANSACTION STACK IS CLEARED\n            let list = this.db.queryGetList(key);\n            list.name = newName;\n            this.db.mutationUpdateList(list);\n            this.db.mutationUpdateSessionData(this.state.sessionData);\n        });\n    }\n    // THIS FUNCTION BEGINS THE PROCESS OF LOADING A LIST FOR EDITING\n    loadList = (key) => {\n        let newCurrentList = this.db.queryGetList(key);\n        this.setState(prevState => ({\n            currentList: newCurrentList,\n            sessionData: prevState.sessionData\n        }), () => {\n            // ANY AFTER EFFECTS?\n        });\n    }\n    // THIS FUNCTION BEGINS THE PROCESS OF CLOSING THE CURRENT LIST\n    closeCurrentList = () => {\n        this.setState(prevState => ({\n            currentList: null,\n            listKeyPairMarkedForDeletion : prevState.listKeyPairMarkedForDeletion,\n            sessionData: this.state.sessionData\n        }), () => {\n            // ANY AFTER EFFECTS?\n        });\n    }\n    renameItem(id, textValue) {\n        this.currentList.items[id] = textValue;\n    }\n    deleteList = (keyNamePair) => {\n        // SOMEHOW YOU ARE GOING TO HAVE TO FIGURE OUT\n        // WHICH LIST IT IS THAT THE USER WANTS TO\n        // DELETE AND MAKE THAT CONNECTION SO THAT THE\n        // NAME PROPERLY DISPLAYS INSIDE THE MODAL\n        this.setState(prevState => ({\n            keyNamePairMarkedForDeletion: keyNamePair\n        }), () => {\n            this.showDeleteListModal();\n        });\n    }\n    deletionStart() {\n        let key = this.state.keyNamePairMarkedForDeletion.key;\n        this.db.mutationDeleteItem(key);\n        let deletedKeyNamePairs = this.state.sessionData.keyNamePairs;\n        for (let i = 0; i < deletedKeyNamePairs.length; i++) {\n            let deletedKeyNamePairsKey = deletedKeyNamePairs[i].key;\n            console.log(deletedKeyNamePairsKey);\n            if (deletedKeyNamePairsKey === key) {\n                deletedKeyNamePairs.splice(i, 1);\n                console.log(deletedKeyNamePairs);\n            }\n        }\n        this.setState(prevState => ({\n            keyNamePairMarkedForDeletion: null,\n            sessionData: {\n                nextKey: prevState.sessionData.nextKey,\n                counter: prevState.sessionData.counter,\n                keyNamePairs: deletedKeyNamePairs\n            }\n        }), () => {\n            this.db.mutationUpdateSessionData(this.state.sessionData);\n            this.hideDeleteListModal();\n        });\n    }\n    // THIS FUNCTION SHOWS THE MODAL FOR PROMPTING THE USER\n    // TO SEE IF THEY REALLY WANT TO DELETE THE LIST\n    showDeleteListModal() {\n        let modal = document.getElementById(\"delete-modal\");\n        modal.classList.add(\"is-visible\");\n    }\n    // THIS FUNCTION IS FOR HIDING THE MODAL\n    hideDeleteListModal() {\n        let modal = document.getElementById(\"delete-modal\");\n        modal.classList.remove(\"is-visible\");\n    }\n    render() {\n        return (\n            <div id=\"app-root\">\n                <Banner \n                    title='Top 5 Lister'\n                    closeCurrentListCall={this.closeCurrentList}\n                    currentList = {this.state.currentList}\n                    />\n                <Sidebar\n                    heading='Your Lists'\n                    currentList={this.state.currentList}\n                    keyNamePairs={this.state.sessionData.keyNamePairs}\n                    createNewListCallback={this.createNewList}\n                    deleteListCallback={this.deleteList}\n                    loadListCallback={this.loadList}\n                    renameListCallback={this.renameList}\n                />\n                <Workspace\n                    currentList={this.state.currentList} \n                    renameItemCallback={this.renameItem}\n                    />\n                <Statusbar \n                    currentList={this.state.currentList} />\n                <DeleteModal\n                    deletionStartCallback = {this.deletionStart.bind(this)}\n                    hideDeleteListModalCallback={this.hideDeleteListModal}\n                    keyNamePairMarkedForDeletion={this.state.keyNamePairMarkedForDeletion}\n                />\n            </div>\n        );\n    }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}